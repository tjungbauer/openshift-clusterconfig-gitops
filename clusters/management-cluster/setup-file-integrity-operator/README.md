

# setup-file-integrity-operator

[![License](https://img.shields.io/badge/License-Apache_2.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![Linting](https://github.com/tjungbauer/openshift-clusterconfig-gitops/actions/workflows/linting.yml/badge.svg)](https://github.com/tjungbauer/openshift-clusterconfig-gitops/actions/workflows/linting.yml)
[![Release Charts](https://github.com/tjungbauer/helm-charts/actions/workflows/release.yml/badge.svg)](https://github.com/tjungbauer/helm-charts/actions/workflows/release.yml)

  ![Version: 1.0.1](https://img.shields.io/badge/Version-1.0.1-informational?style=flat-square)

 

  ## Description

  Setup File Integrity Operator

This "wrapper" Helm Chart is used to deploy and configure the File Integrity Operator.
This Operator can be used to verify if any file has been changed on the operating system. (based on AIDE).

The example below provides a configuration for the worker nodes and the control planes.

It mainly uses the Chart [file-integrity-operator](https://github.com/tjungbauer/helm-charts/tree/main/charts/file-integrity-operator) which takes care of configuring the Operator.
The [values-file](https://github.com/tjungbauer/helm-charts/tree/main/charts/file-integrity-operator) of the main chart provides further examples of possible settings.

Three additional Charts are required as a dependency and are responsible for installing and verifying the Operator itself as well as providing a template library.
Verify the README and/or the values files for further information.

## Dependencies

This chart has the following dependencies:

| Repository | Name | Version |
|------------|------|---------|
| https://charts.stderr.at/ | file-integrity-operator | ~1.0.0 |
| https://charts.stderr.at/ | helper-operator | ~1.0.0 |
| https://charts.stderr.at/ | helper-status-checker | ~4.0.0 |
| https://charts.stderr.at/ | tpl | ~1.0.0 |

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| tjungbauer |  |  |

## Sources
Source:

Source code:

## Example values files

```yaml
---

# Deploys Operator --> Subscription and Operatorgroup
# Syncwave: 0
helper-operator:
  operators:
    file-integrity-operator:
      enabled: true
      syncwave: '0'
      namespace:
        name: openshift-file-integrity
        create: true
      subscription:
        channel: stable
        approval: Manual
        operatorName: file-integrity-operator
        source: redhat-operators
        sourceNamespace: openshift-marketplace
      operatorgroup:
        create: true
        notownnamespace: true

helper-status-checker:
  enabled: true
  approver: true

  checks:
    - operatorName: file-integrity-operator
      namespace:
        name: openshift-file-integrity
      serviceAccount:
        name: "sa-file-integrity-checker"

file-integrity-operator:
  aide:
    worker:
      enabled: true
      syncwave: 5
      name: worker-fileintegrity
      namespace: openshift-file-integrity
      selector:
        key: node-role.kubernetes.io/worker
        value: ""
      config:
        gracePeriod: 900
        maxBackups: 5
        customconfig:  # Created if omitted
          enabled: false
          # name: myconfig
          # namespace: openshift-file-integrity
          # key: "config"

      # If you want this component to only run on specific nodes, you can
      # configure tolerations of tainted nodes.
      tolerations:
        - effect: NoSchedule
          key: node-role.kubernetes.io/worker
          operator: Exists

    controlplane:
      enabled: true
      syncwave: 10
      name: controlplane-fileintegrity
      namespace: openshift-file-integrity
      selector:
        key: node-role.kubernetes.io/master
        value: ""
      config:
        gracePeriod: 900
        maxBackups: 5
        customconfig:  # Created if omitted
          enabled: true
          name: controlplane-aide-conf
          namespace: openshift-file-integrity
          key: "controlplane-aide.conf"

      # If you want this component to only run on specific nodes, you can
      # configure tolerations of tainted nodes.
      tolerations:
        - effect: NoSchedule
          key: node-role.kubernetes.io/master
          operator: Exists
```

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.12.0](https://github.com/norwoodj/helm-docs/releases/v1.12.0)
